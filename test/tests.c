#include "../src/board.h"
#include "../thirdparty/ctest.h"

CTEST(going_out_of_the_board_pawn_w, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'a',
                    '9',
                    '-',
                    'a',
                    '1',
                    ' ',
                    'a',
                    '9',
                    '-',
                    'a',
                    '3'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(0, d);
}

CTEST(going_out_of_the_board_pawn_b, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'a',
                    '9',
                    '-',
                    'a',
                    '1',
                    ' ',
                    'a',
                    '9',
                    '-',
                    'a',
                    '3'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnB(board, str);

    ASSERT_EQUAL(0, d);
}

CTEST(going_in_range_of_the_board, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'e',
                    '2',
                    '-',
                    'e',
                    '4',
                    ' ',
                    'a',
                    '9',
                    '-',
                    'a',
                    '3'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(1, d);
}

CTEST(going_in_range_of_the_board_pawn_b, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'e',
                    '2',
                    '-',
                    'e',
                    '4',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnB(board, str);

    ASSERT_EQUAL(1, d);
}

CTEST(murder_t_pawn, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'c',
                    '4',
                    'x',
                    'b',
                    '5',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', ' ', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', 'p', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', ' ', 'P', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(1, d);
}

CTEST(murder_f_pawn, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'c',
                    '4',
                    'x',
                    'b',
                    '5',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', ' ', 'P', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(0, d);
}

CTEST(move_to_a_busy_cell_pawn, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'b',
                    '4',
                    '-',
                    'b',
                    '5',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', ' ', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', 'p', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', 'P', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', ' ', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(0, d);
}

CTEST(move_to_a_empty_cell_pawn, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'b',
                    '4',
                    '-',
                    'b',
                    '5',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', 'P', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', ' ', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(1, d);
}

CTEST(move_back_pawn, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'b',
                    '4',
                    '-',
                    'b',
                    '3',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', 'P', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', ' ', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(0, d);
}

CTEST(move_pawn_n_forward, check)
{
    char str[14] = {'1',
                    '.',
                    ' ',
                    'b',
                    '4',
                    '-',
                    'c',
                    '5',
                    ' ',
                    'e',
                    '7',
                    '-',
                    'e',
                    '5'};
    char board[9][9] = {{'8', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
                        {'7', 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
                        {'6', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'5', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'4', ' ', 'P', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'3', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'2', 'P', ' ', 'P', 'P', 'P', 'P', 'P', 'P'},
                        {'1', 'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'},
                        {' ', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'}};
    int d = DoStepPawnW(board, str);

    ASSERT_EQUAL(0, d);
}
